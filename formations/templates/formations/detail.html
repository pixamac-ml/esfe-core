{% extends "base.html" %}
{% load component_tags %}

{% block title %}{{ programme.title }} – ESFE{% endblock %}

{% block content %}

{% component "formation_hero" programme=programme %}
{% endcomponent %}

<section class="py-24 bg-soft">
  <div class="max-w-7xl mx-auto px-6 grid lg:grid-cols-3 gap-16">

    <!-- ================= COLONNE PRINCIPALE ================= -->
    <div class="lg:col-span-2 space-y-20">

      <!-- Présentation -->
      <section class="space-y-6">
        <h2 class="text-3xl font-bold text-primary">
          Présentation de la formation
        </h2>

        <div class="prose max-w-none text-gray-700 leading-relaxed">
          {{ programme.description|linebreaks }}
        </div>
      </section>

      <!-- Organisation financière -->
      {% if has_fees %}
        {% component "formation_finance"
            years_with_totals=years_with_totals
        %}
        {% endcomponent %}
      {% endif %}

      <!-- Variation Master -->
      {% if cycle_type == "master" %}
      <section class="bg-white border border-primary/10 rounded-2xl p-10 space-y-6 shadow-sm">
        <h3 class="text-2xl font-bold text-primary">
          Approche stratégique & leadership
        </h3>
        <p class="text-gray-700">
          Cette formation de niveau Master met l’accent sur la conception,
          le pilotage et l’évaluation des politiques de santé publique.
        </p>
      </section>
      {% endif %}

      <!-- Variation Licence -->
      {% if cycle_type == "licence" %}
      <section class="bg-white border border-primary/10 rounded-2xl p-10 space-y-6 shadow-sm">
        <h3 class="text-2xl font-bold text-primary">
          Formation professionnalisante
        </h3>
        <p class="text-gray-700">
          La formation de Licence vise l’acquisition des compétences
          techniques fondamentales et l’intégration rapide dans le milieu professionnel.
        </p>
      </section>
      {% endif %}

    </div>

    <!-- ================= SIDEBAR ================= -->
    <aside class="space-y-10">

      {% component "formation_admission"
          programme=programme
          can_apply=can_apply
      %}
      {% endcomponent %}

      {% if has_documents %}
        {% component "formation_documents"
            required_documents=required_documents
        %}
        {% endcomponent %}
      {% endif %}

      {% component "formation_trust_block" %}
      {% endcomponent %}

    </aside>

  </div>
</section>

{% endblock %}
