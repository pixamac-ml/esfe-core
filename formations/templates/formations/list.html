{% extends "base.html" %}
{% load component_tags %}

{% block title %}Formations – ESFE{% endblock %}

{% block content %}

<!-- ===================================================== -->
<!-- HEADER SECTION                                        -->
<!-- ===================================================== -->

{% component "section_header"
  title="Nos formations"
  subtitle="Des parcours adaptés aux métiers de la santé"
%}{% endcomponent %}


<!-- ===================================================== -->
<!-- SECTION FORMATIONS                                    -->
<!-- ===================================================== -->

<section class="py-16">

  <div class="max-w-7xl mx-auto px-6">

    <!-- ================= FILTRES ================= -->

    <div class="flex flex-wrap justify-center gap-4 mb-12">

      <!-- Toutes -->
      <button
        hx-get="{% url 'formations:list_fragment' %}"
        hx-target="#programme-container"
        hx-swap="innerHTML"
        hx-push-url="true"
        class="px-4 py-2 rounded-md text-sm font-medium transition
               bg-gray-200 hover:bg-gray-300"
      >
        Toutes
      </button>

      <!-- Cycles -->
      {% for cycle in cycles %}
        <button
          hx-get="{% url 'formations:list_fragment' %}?cycle={{ cycle.slug }}"
          hx-target="#programme-container"
          hx-swap="innerHTML"
          hx-push-url="true"
          class="px-4 py-2 rounded-md text-sm font-medium transition
                 bg-gray-200 hover:bg-gray-300"
        >
          {{ cycle.name }}
        </button>
      {% endfor %}

    </div>


    <!-- ================= CONTAINER DYNAMIQUE ================= -->

    <div
      id="programme-container"
      hx-get="{% url 'formations:list_fragment' %}"
      hx-trigger="load"
      hx-swap="innerHTML"
      hx-indicator="#global-loader"
      class="min-h-[300px]"
    >
    </div>

  </div>

</section>

{% endblock %}
