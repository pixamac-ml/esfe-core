{% extends "base.html" %}
{% load component_tags %}
{% load static %}
{% load humanize %}

{% block title %}Formations – ESFE{% endblock %}

{% block content %}

<!-- ================= HERO INSTITUTIONNEL ================= -->
<section class="relative overflow-hidden bg-primary text-white">

  <div class="absolute inset-0">
    <img src="{% static 'public/images/hero-formation.png' %}"
         class="w-full h-full object-cover opacity-15"
         alt="ESFE formations">
  </div>

  <div class="absolute inset-0 bg-gradient-to-r from-primary/95 to-primary/80"></div>

  <div class="relative max-w-7xl mx-auto px-6 py-28">

    <div class="max-w-3xl space-y-8">

      <div class="inline-flex items-center gap-3
                  bg-white/10 backdrop-blur-md
                  px-6 py-3 rounded-full text-sm tracking-wide">

        <svg class="w-5 h-5 text-secondary" fill="currentColor" viewBox="0 0 20 20">
          <path d="M10 2L2 6l8 4 8-4-8-4z"/>
        </svg>

        Catalogue académique officiel
      </div>

      <h1 class="text-5xl md:text-6xl font-bold leading-tight">
        Nos Formations
        <span class="block text-secondary">
          Professionnelles
        </span>
      </h1>

      <p class="text-lg text-white/80 leading-relaxed">
        Des parcours structurés pour former les professionnels de santé
        avec rigueur, éthique et excellence.
      </p>

    </div>

  </div>
</section>


<!-- ================= CONTENU ================= -->
<section class="py-24 bg-soft">
  <div class="max-w-7xl mx-auto px-6">

    <div class="grid grid-cols-1 lg:grid-cols-4 gap-16">

      <!-- Sidebar -->
      <aside class="lg:col-span-1">

        {% component "programme_filters"
            cycles=cycles
            current_cycle=current_cycle
            search_query=search_query
        %}
        {% endcomponent %}

      </aside>

      <!-- Grid -->
      <div class="lg:col-span-3">

        <div
          id="programme-container"
          hx-get="{% url 'formations:list' %}"
          hx-trigger="load"
          hx-target="#programme-container"
          hx-swap="innerHTML"
          hx-push-url="true"
          hx-history-elt
          hx-indicator="#loader"
          class="min-h-[400px]"
        ></div>

        <div id="loader"
             class="hidden flex items-center justify-center py-16">
          <div class="w-8 h-8 border-4 border-secondary border-t-transparent rounded-full animate-spin"></div>
        </div>

      </div>

    </div>

  </div>
</section>

{% endblock %}
